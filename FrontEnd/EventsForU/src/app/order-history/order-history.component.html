<div class="order-history-page">
  <h2 class="page-title">Your Order History</h2>

  <div *ngIf="isLoading" class="loading-indicator"> <p>Loading order history...</p> </div>
  <div *ngIf="errorMessage" class="status-message error"> <p>{{ errorMessage }}</p> </div>

  <div *ngIf="!isLoading && tickets.length > 0" class="orders-list-container">
    <div *ngFor="let ticket of tickets; trackBy: trackByTicketId" class="order-summary-card">
      <div class="order-summary-header">
        <span>Ticket ID: {{ ticket.id }}</span>
        <span>Date: {{ ticket.booking_item.booking_date_obj | date:'medium' }}</span>
        <span>Total: {{ ticket.booking_item.total | currency:'USD' }}</span>
        <span>Status: {{ ticket.status ? 'Active' : 'Expired' }}</span>
      </div>

      <div class="order-items-details">
        <h4 class="items-list-title">Item Details:</h4>
        <div class="items-list">
          <div class="order-item-row">
            <span class="item-name">{{ ticket.booking_item.event.name }}</span>
            <span class="item-quantity-price">({{ ticket.booking_item.quantity }} x {{ ticket.booking_item.event.price | currency:'USD' }})</span>
            <span class="item-row-subtotal">Subtotal: {{ ticket.booking_item.total | currency:'USD' }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="!isLoading && !errorMessage && tickets.length === 0" class="no-orders-info">
    <p>You haven't placed any orders yet.</p>
  </div>
</div>
